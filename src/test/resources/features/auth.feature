# language: ko
# 희운
@acceptance @auth
기능: 회원 인증
  MeeTeam 서비스를 이용하기 위해 회원은 가입하고, 로그인하고, 로그아웃할 수 있어야 한다.

  # ============================================================================
  # 일반회원가입 (이메일/비밀번호 기반)
  # ============================================================================

  @signup @general @happy-path
  시나리오: 일반회원이 모든 필수 정보를 입력하면 회원가입에 성공한다
    먼저 "hong@example.com" 이메일은 가입되지 않은 상태이다
    만약 다음 정보로 일반회원가입을 요청하면:
      | 이메일            | 비밀번호      | 이름   | 생년월일     | 성별 | 직군    | 직무        | 프로젝트경험횟수 |
      | hong@example.com | password123  | 홍길동 | 1998-03-15  | 남성 | BACKEND | JAVA_SPRING | 3               |
    그러면 회원가입에 성공한다


  @signup @general @error-case
  시나리오: 일반회원이 이미 가입된 이메일로는 회원가입할 수 없다
    먼저 "hong@example.com" 이메일로 가입된 일반회원이 존재한다
    만약 동일한 이메일 "hong@example.com"으로 일반회원가입을 요청하면
    그러면 회원가입에 실패한다
    그리고 "이미 존재하는 이메일입니다" 메시지를 확인한다

  @signup @general @validation
  시나리오: 일반회원의 비밀번호가 8자 미만이면 회원가입할 수 없다
    만약 비밀번호 "pass123"으로 일반회원가입을 요청하면
    그러면 회원가입에 실패한다
    그리고 "비밀번호는 최소 8자 이상이어야 합니다" 메시지를 확인한다

  @signup @general @validation
  시나리오: 일반회원의 이메일 형식이 올바르지 않으면 회원가입할 수 없다
    만약 이메일 "invalid-email"로 일반회원가입을 요청하면
    그러면 회원가입에 실패한다
    그리고 "올바른 이메일 형식이 아닙니다" 메시지를 확인한다

  @signup @general @validation
  시나리오: 일반회원이 필수 항목을 입력하지 않으면 회원가입할 수 없다
    만약 이름을 입력하지 않고 일반회원가입을 요청하면
    그러면 회원가입에 실패한다
    그리고 "이름을 입력해주세요" 메시지를 확인한다

  # ============================================================================
  # 이메일 중복 확인 (일반회원 전용)
  # ============================================================================

  @email-check @general @happy-path
  시나리오: 일반회원가입 시 사용 가능한 이메일인지 확인할 수 있다
    먼저 "new@example.com" 이메일은 가입되지 않은 상태이다
    만약 "new@example.com" 이메일 중복 확인을 요청하면
    그러면 "사용 가능한 이메일입니다" 메시지를 확인한다

  @email-check @general @error-case
  시나리오: 일반회원가입 시 이미 사용 중인 이메일은 사용할 수 없다
    먼저 "hong@example.com" 이메일로 가입된 회원이 존재한다
    만약 "hong@example.com" 이메일 중복 확인을 요청하면
    그러면 "이미 존재하는 이메일입니다" 메시지를 확인한다

  # ============================================================================
  # 일반회원 로그인
  # ============================================================================

  @login @general @happy-path
  시나리오: 일반회원이 올바른 정보로 로그인하면 서비스를 이용할 수 있다
    먼저 다음 정보로 가입된 일반회원이 존재한다:
      | 이메일            | 비밀번호      | 이름   |
      | hong@example.com | password123  | 홍길동 |
    만약 "hong@example.com"과 "password123"으로 로그인을 요청하면
    그러면 로그인에 성공한다
    그리고 인증 토큰을 발급받는다
    그리고 회원 전용 서비스를 이용할 수 있다

  @login @general @error-case
  시나리오: 일반회원이 잘못된 비밀번호로 로그인하면 실패한다
    먼저 "hong@example.com" 이메일로 가입된 일반회원이 존재한다
    만약 "hong@example.com"과 잘못된 비밀번호 "wrongpass"로 로그인을 요청하면
    그러면 로그인에 실패한다
    그리고 "이메일 또는 비밀번호가 올바르지 않습니다" 메시지를 확인한다

  @login @general @error-case
  시나리오: 가입되지 않은 이메일로 로그인하면 실패한다
    먼저 "unknown@example.com" 이메일은 가입되지 않은 상태이다
    만약 "unknown@example.com"과 "anypassword"으로 로그인을 요청하면
    그러면 로그인에 실패한다
    그리고 "이메일 또는 비밀번호가 올바르지 않습니다" 메시지를 확인한다

  # ============================================================================
  # OAuth 회원가입/로그인 (Google/GitHub)
  # - OAuth 회원은 이메일/비밀번호를 직접 입력하지 않음
  # - OAuth 제공자로부터 이메일을 자동으로 받아옴
  # - 추가 정보(이름, 생년월일, 성별, 직무 등)만 입력
  # ============================================================================

  @oauth @signup @happy-path
  시나리오: Google 계정으로 처음 로그인하면 추가 정보를 입력해야 한다
    먼저 "hong@gmail.com" Google 계정은 MeeTeam에 가입되지 않은 상태이다
    만약 Google OAuth 인증에 성공하면
    그러면 회원가입 코드를 발급받는다
    그리고 추가 정보 입력을 한다
    그러면 Google 계정으로 회원가입에 성공한다

  @oauth @signup @happy-path
  시나리오: Google 계정 사용자가 추가 정보를 입력하면 가입이 완료된다
    먼저 "새사용자"가 Google OAuth 인증 후 회원가입 코드를 발급받은 상태이다
    만약 다음 추가 정보로 OAuth 회원가입을 완료하면:
      | 이름     | 생년월일     | 성별 | 직군     | 직무         | 프로젝트경험횟수 |
      | 새사용자 | 2000-01-01  | 남성 | FRONTEND | WEB_FRONTEND | 3               |
    그러면 회원가입에 성공한다
    그리고 인증 토큰을 발급받는다

  @oauth @login @happy-path
  시나리오: 이미 가입된 Google 계정은 바로 로그인된다
    먼저 "hong@gmail.com" Google 계정으로 가입된 회원이 존재한다
    만약 동일한 Google 계정으로 OAuth 인증에 성공하면
    그러면 추가 정보 입력 없이 바로 로그인된다
    그리고 인증 토큰을 발급받는다

  @oauth @login @happy-path
  시나리오: GitHub 계정으로 로그인할 수 있다
    먼저 "developer" GitHub 계정으로 가입된 회원이 존재한다
    만약 동일한 GitHub 계정으로 OAuth 인증에 성공하면
    그러면 로그인에 성공한다

  # ============================================================================
  # 토큰 재발급
  # ============================================================================

  @token @happy-path
  시나리오: 인증 토큰이 만료되면 재발급받을 수 있다
    먼저 "홍길동" 회원이 로그인한 상태이다
    그리고 인증 토큰이 만료되었다
    만약 리프레시 토큰으로 토큰 재발급을 요청하면
    그러면 새로운 인증 토큰을 발급받는다
    그리고 서비스를 계속 이용할 수 있다

  @token @error-case
  시나리오: 리프레시 토큰이 없으면 재발급받을 수 없다
    만약 리프레시 토큰 없이 토큰 재발급을 요청하면
    그러면 토큰 재발급에 실패한다
    그리고 "다시 로그인해주세요" 메시지를 확인한다

  @token @error-case
  시나리오: 리프레시 토큰이 만료되면 다시 로그인해야 한다
    먼저 "홍길동" 회원의 리프레시 토큰이 만료된 상태이다
    만약 만료된 리프레시 토큰으로 토큰 재발급을 요청하면
    그러면 토큰 재발급에 실패한다
    그리고 "세션이 만료되었습니다. 다시 로그인해주세요" 메시지를 확인한다

  # ============================================================================
  # 로그아웃
  # ============================================================================

  @logout @happy-path
  시나리오: 로그아웃하면 인증 토큰이 무효화된다
    먼저 "홍길동" 회원이 로그인한 상태이다
    만약 로그아웃을 요청하면
    그러면 로그아웃에 성공한다
    그리고 이전에 발급받은 인증 토큰으로 서비스에 접근할 수 없다

  @logout @error-case
  시나리오: 로그아웃한 토큰으로 서비스에 접근하면 거부된다
    먼저 "홍길동" 회원이 로그인 후 로그아웃한 상태이다
    만약 이전 토큰으로 회원 전용 서비스에 접근하면
    그러면 요청이 거부된다
    그리고 "로그인이 필요합니다" 메시지를 확인한다