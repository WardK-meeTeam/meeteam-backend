# language: ko

@acceptance @qna
기능: 프로젝트 Q&A
  회원이 프로젝트에 대해 질문하고, 프로젝트 리더가 답변할 수 있어야 한다.

  배경:
    먼저 "홍길동"이 리더인 "AI 뉴스 요약 서비스" 프로젝트가 존재한다

  # ============================================================================
  # 질문 작성
  # ============================================================================

  @question @happy-path
  시나리오: 회원이 프로젝트에 질문을 작성할 수 있다
    먼저 "김철수" 회원이 로그인한 상태이다
    만약 "김철수"가 "AI 뉴스 요약 서비스" 프로젝트에 다음 질문을 작성하면:
      """
      프로젝트 모임은 매주 무슨 요일에 진행하나요?
      """
    그러면 질문 작성에 성공한다
    그리고 Q&A 목록에 해당 질문이 표시된다
    그리고 "홍길동" 리더에게 새로운 질문 알림이 발송된다

  @question @happy-path
  시나리오: 질문 목록에서 작성자와 작성일을 확인할 수 있다
    먼저 "김철수"가 "2024-03-15"에 질문을 작성한 상태이다
    만약 프로젝트 Q&A 목록을 조회하면
    그러면 질문 작성자 "김철수"를 확인할 수 있다
    그리고 작성일 "2024-03-15"를 확인할 수 있다

  @question @happy-path
  시나리오: 여러 개의 질문을 작성할 수 있다
    먼저 "김철수" 회원이 로그인한 상태이다
    그리고 "김철수"가 이미 1개의 질문을 작성한 상태이다
    만약 "김철수"가 새로운 질문을 작성하면
    그러면 질문 작성에 성공한다
    그리고 Q&A 목록에 2개의 질문이 표시된다

  @question @auth
  시나리오: 비회원은 질문을 작성할 수 없다
    먼저 로그인하지 않은 상태이다
    만약 프로젝트에 질문을 작성하려고 하면
    그러면 질문 작성에 실패한다
    그리고 "로그인이 필요합니다" 메시지를 확인한다

  @question @validation
  시나리오: 빈 내용으로 질문을 작성할 수 없다
    먼저 "김철수" 회원이 로그인한 상태이다
    만약 "김철수"가 내용 없이 질문을 작성하려고 하면
    그러면 질문 작성에 실패한다
    그리고 "질문 내용을 입력해주세요" 메시지를 확인한다

  # ============================================================================
  # 답변 작성
  # ============================================================================

  @answer @happy-path
  시나리오: 리더가 질문에 답변을 작성할 수 있다
    먼저 "김철수"가 다음 질문을 작성한 상태이다:
      """
      프로젝트 모임은 매주 무슨 요일에 진행하나요?
      """
    그리고 "홍길동" 리더가 로그인한 상태이다
    만약 "홍길동"이 해당 질문에 다음과 같이 답변하면:
      """
      매주 토요일 오후 2시 강남역 부근에서 진행합니다.
      온라인 참여도 가능합니다.
      """
    그러면 답변 작성에 성공한다
    그리고 Q&A 목록에서 답변을 확인할 수 있다
    그리고 답변 옆에 "팀장" 태그가 표시된다
    그리고 "김철수"에게 답변 알림이 발송된다

  @answer @happy-path
  시나리오: 답변에 작성일이 표시된다
    먼저 "홍길동"이 "2024-03-16"에 답변을 작성한 상태이다
    만약 프로젝트 Q&A 목록을 조회하면
    그러면 답변 작성일 "2024-03-16"을 확인할 수 있다

  @answer @auth
  시나리오: 일반 팀원도 질문에 답변을 작성할 수 있다
    먼저 "김철수"가 질문을 작성한 상태이다
    그리고 "이영희"가 프로젝트의 팀원이다
    그리고 "이영희" 회원이 로그인한 상태이다
    만약 "이영희"가 해당 질문에 답변을 작성하면
    그러면 답변 작성에 성공한다
    그리고 답변 옆에 "팀장" 태그가 표시되지 않는다

  @answer @auth
  시나리오: 프로젝트에 참여하지 않은 회원은 답변을 작성할 수 없다
    먼저 "김철수"가 질문을 작성한 상태이다
    그리고 "박지민" 회원이 로그인한 상태이다
    그리고 "박지민"은 해당 프로젝트의 팀원이 아니다
    만약 "박지민"이 해당 질문에 답변을 작성하려고 하면
    그러면 답변 작성에 실패한다
    그리고 "프로젝트 팀원만 답변할 수 있습니다" 메시지를 확인한다

  @answer @validation
  시나리오: 빈 내용으로 답변을 작성할 수 없다
    먼저 "김철수"가 질문을 작성한 상태이다
    그리고 "홍길동" 리더가 로그인한 상태이다
    만약 "홍길동"이 내용 없이 답변을 작성하려고 하면
    그러면 답변 작성에 실패한다
    그리고 "답변 내용을 입력해주세요" 메시지를 확인한다

  # ============================================================================
  # Q&A 조회
  # ============================================================================

  @list @happy-path
  시나리오: 비회원도 Q&A 목록을 조회할 수 있다
    먼저 프로젝트에 다음 Q&A가 존재한다:
      | 질문자  | 질문                          | 답변                              |
      | 김철수 | 모임은 언제 하나요?            | 매주 토요일 오후 2시입니다.         |
      | 이영희 | 기술 스택은 확정인가요?         | 아직 논의 중입니다.                |
    그리고 로그인하지 않은 상태이다
    만약 프로젝트 Q&A 탭에 접근하면
    그러면 2개의 Q&A를 확인할 수 있다
    그리고 각 질문과 답변 내용을 확인할 수 있다

  @list @happy-path
  시나리오: Q&A가 없으면 안내 메시지가 표시된다
    먼저 프로젝트에 Q&A가 없는 상태이다
    만약 프로젝트 Q&A 탭에 접근하면
    그러면 "아직 등록된 Q&A가 없습니다" 메시지를 확인한다

  @list @happy-path
  시나리오: Q&A는 최신순으로 정렬된다
    먼저 프로젝트에 다음 순서로 질문이 작성되었다:
      | 순서 | 질문자  | 질문              |
      | 1   | 김철수 | 첫 번째 질문입니다  |
      | 2   | 이영희 | 두 번째 질문입니다  |
      | 3   | 박지민 | 세 번째 질문입니다  |
    만약 프로젝트 Q&A 탭에 접근하면
    그러면 "세 번째 질문입니다"가 첫 번째로 표시된다