# language: ko

@acceptance @file
기능: 파일 업로드
  회원이 프로필 사진이나 프로젝트 이미지를 안전하게 업로드할 수 있어야 한다.
  실제 API: PUT /api/members (프로필 수정), POST /api/projects/{projectId} (프로젝트 수정)
  두 API 모두 인증이 필요하다.

  배경:
    먼저 "홍길동" 회원이 로그인한 상태이다

  # ==========================================================================
  # 정상 업로드 시나리오
  # ==========================================================================

  @upload @happy-path
  시나리오: JPG 이미지를 프로필 사진으로 업로드할 수 있다
    만약 "홍길동"이 "profile.jpg" 파일을 프로필 사진으로 업로드하면
    그러면 업로드에 성공한다
    그리고 "홍길동"의 프로필 사진이 변경된다

  @upload @happy-path
  시나리오: PNG 이미지를 프로젝트 썸네일로 업로드할 수 있다
    먼저 "홍길동"이 "AI 챗봇 개발" 프로젝트의 팀장이다
    만약 "홍길동"이 "thumbnail.png" 파일을 프로젝트 썸네일로 업로드하면
    그러면 업로드에 성공한다
    그리고 프로젝트 썸네일이 설정된다

  @upload @happy-path
  시나리오: GIF 이미지를 프로필 사진으로 업로드할 수 있다
    만약 "홍길동"이 "animation.gif" 파일을 프로필 사진으로 업로드하면
    그러면 업로드에 성공한다

  # ==========================================================================
  # 파일 형식 검증 시나리오
  # ==========================================================================

  @validation @error-case
  시나리오: 실행 파일은 프로필 사진으로 업로드할 수 없다
    만약 "홍길동"이 "malware.exe" 파일을 프로필 사진으로 업로드하면
    그러면 업로드가 거부된다

  @validation @error-case
  시나리오: 압축 파일은 프로필 사진으로 업로드할 수 없다
    만약 "홍길동"이 "archive.zip" 파일을 프로필 사진으로 업로드하면
    그러면 업로드가 거부된다

  @validation @error-case
  시나리오: 스크립트 파일은 프로필 사진으로 업로드할 수 없다
    만약 "홍길동"이 "script.js" 파일을 프로필 사진으로 업로드하면
    그러면 업로드가 거부된다

  @validation @edge-case
  시나리오: 확장자를 위장한 파일은 프로필 사진으로 업로드할 수 없다
    만약 "홍길동"이 "image.jpg.exe" 파일을 프로필 사진으로 업로드하면
    그러면 업로드가 거부된다

  # ==========================================================================
  # 파일 크기 검증 시나리오
  # ==========================================================================

  @validation @error-case
  시나리오: 최대 용량을 초과한 파일은 업로드할 수 없다
    먼저 최대 허용 용량은 5MB이다
    만약 "홍길동"이 10MB 크기의 "large_image.jpg" 파일을 프로필 사진으로 업로드하면
    그러면 업로드가 거부된다

  @validation @edge-case
  시나리오: 최대 용량과 정확히 같은 크기의 파일은 업로드할 수 있다
    먼저 최대 허용 용량은 5MB이다
    만약 "홍길동"이 5MB 크기의 "exact_size.jpg" 파일을 프로필 사진으로 업로드하면
    그러면 업로드에 성공한다

  # ==========================================================================
  # 권한 검증 시나리오
  # ==========================================================================

  @permission @error-case
  시나리오: 팀장이 아니면 프로젝트 썸네일을 변경할 수 없다
    먼저 "홍길동"이 "AI 챗봇 개발" 프로젝트의 일반 멤버이다
    만약 "홍길동"이 프로젝트 썸네일을 변경하려고 하면
    그러면 업로드가 거부된다
