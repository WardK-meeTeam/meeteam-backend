# 프로젝트 수정 정책

## 개요

프로젝트 리더가 프로젝트 정보를 수정할 때 적용되는 비즈니스 규칙을 정의합니다.

---

## 기본 동작

1. 수정 페이지 진입 시 기존 프로젝트 정보를 **미리 채워서(pre-fill)** 보여줌
2. 리더만 수정 가능 (일반 팀원은 권한 없음)

---

## 수정 가능 여부

### 프로젝트 모집 상태에 따른 수정 가능 여부

| 상태 | 수정 가능 여부 | 비고 |
|------|---------------|------|
| 모집중 | O | 아래 제약사항 적용 |
| 모집마감 (리더 수동) | X | 수정 불가, 모집 재개 후 수정 가능 |
| 모집마감 (자동 - 전체 포지션 마감) | O | 포지션 인원 늘리면 해당 포지션 모집중으로 전환 |

---

## 모집 포지션 수정 제약사항

### 1. 모집 인원 축소 제한 (필수)

**규칙**: 현재 승인된 인원 이하로 모집 인원을 줄일 수 없음

```
예시:
- 백엔드 - Java/Spring (현재 2/3명 승인)
- 모집인원 1명으로 변경 시도 → 실패
- 에러: "현재 승인된 인원(2명)보다 적게 설정할 수 없습니다."
- 최소 2명 이상으로만 변경 가능
```

### 2. 인원이 있는 포지션 삭제 제한 (필수)

**규칙**: 승인된 팀원이 1명이라도 있는 포지션은 삭제할 수 없음

```
예시:
- 프론트 - 웹 프론트엔드 (현재 1/2명)
- 포지션 삭제 시도 → 실패
- 에러: "승인된 팀원이 있는 포지션은 삭제할 수 없습니다."
- 0명일 때만 삭제 가능
```

### 3. 대기 지원자가 있는 포지션 삭제 제한 (필수)

**규칙**: 대기 중인 지원자가 있는 포지션은 삭제할 수 없음

```
예시:
- 백엔드 - Kotlin/Spring (현재 0/2명, 대기 지원자 3명)
- 포지션 삭제 시도 → 실패
- 에러: "대기 중인 지원자가 있습니다. 먼저 지원자를 처리해주세요."
- 리더가 지원자들을 승인/거절 처리 후 삭제 가능
```

**처리 흐름**:
```
1. 리더가 포지션 삭제 시도
2. 대기 지원자 존재 확인
3. 존재하면 → 에러 반환, 삭제 불가
4. 리더가 대기 지원자 모두 처리 (승인 또는 거절)
5. 대기 지원자 0명 상태
6. 이제 포지션 삭제 가능
```

---

## 포지션 모집 상태 자동 전환

### 포지션 인원 증가 시

| 기존 상태 | 인원 변경 | 결과 |
|----------|----------|------|
| 마감 (3/3명) | 4명으로 증가 | 모집중 (3/4명) |
| 모집중 (2/3명) | 4명으로 증가 | 모집중 (2/4명) |

### 포지션 인원 감소 시

| 기존 상태 | 인원 변경 | 결과 |
|----------|----------|------|
| 모집중 (2/4명) | 3명으로 감소 | 모집중 (2/3명) |
| 모집중 (2/4명) | 2명으로 감소 | 마감 (2/2명) |
| 모집중 (2/4명) | 1명으로 감소 | 불가 (현재 인원 이하) |

---

## 수정 가능 항목

| 항목 | 수정 가능 | 제약사항 |
|------|----------|----------|
| 프로젝트명 | O | - |
| GitHub 레포지토리 주소 | O | - |
| 소통 채널 주소 | O | - |
| 프로젝트 카테고리 | O | - |
| 프로젝트 소개글 | O | - |
| 출시 플랫폼 | O | - |
| 프로젝트 커버 이미지 | O | - |
| 나의 분야 (리더 포지션) | O | - |
| 모집 분야 추가 | O | - |
| 모집 분야 삭제 | 조건부 | 승인 인원 0명 & 대기 지원자 0명 |
| 모집 인원 증가 | O | - |
| 모집 인원 감소 | 조건부 | 현재 승인 인원 이상으로만 |
| 필요 기술 스택 | O | 제약 없음 |
| 모집 마감일 | O | - |

---

## 에러 메시지 정리

| 상황 | 에러 메시지 |
|------|------------|
| 리더 수동 모집마감 상태에서 수정 시도 | "모집이 마감된 상태에서는 수정할 수 없습니다. 모집을 재개한 후 수정해주세요." |
| 현재 인원 이하로 축소 시도 | "현재 승인된 인원({n}명)보다 적게 설정할 수 없습니다." |
| 승인 인원이 있는 포지션 삭제 시도 | "승인된 팀원이 있는 포지션은 삭제할 수 없습니다." |
| 대기 지원자가 있는 포지션 삭제 시도 | "대기 중인 지원자가 있습니다. 먼저 지원자를 처리해주세요." |
| 권한 없는 사용자가 수정 시도 | "프로젝트 수정 권한이 없습니다." |

---

## 변경 이력

| 날짜 | 변경 내용 |
|------|----------|
| 2026-02-21 | 최초 작성 |