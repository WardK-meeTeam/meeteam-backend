# 인수 조건 (Acceptance Criteria)

`risk-matrix.md`의 리스크 우선순위에 따라 5W1H 분석을 수행하고, 비개발자도 이해할 수 있는 인수 조건을 정의합니다.

---

## Priority 1: 프로젝트 검색 성능 최적화

### 5W1H 분석

| 항목 | 내용 |
|:---:|:---|
| **Who** | 프로젝트를 찾고 있는 모든 사용자 |
| **What** | 메인 페이지 및 검색 페이지에서 프로젝트 목록을 조회하는 기능 |
| **When** | 사용자가 메인 페이지에 접속하거나, 필터(카테고리, 기술 스택 등)를 적용하여 검색할 때 |
| **Where** | 메인 페이지, 프로젝트 검색 페이지 |
| **Why** | 현재 한 번의 검색에 61번의 DB 조회가 발생하여, 데이터가 쌓일수록 페이지 로딩이 극도로 느려지기 때문 |
| **How** | 여러 번 나눠서 조회하던 데이터를 한 번에 조회하도록 쿼리를 최적화 |

### 인수 조건

> **"프로젝트 100개가 등록된 상태에서 검색 페이지를 열었을 때, 프로젝트 목록이 정상적으로 표시되어야 한다."**

---

## Priority 2: 멤버 추가 & 동시성 제어

### 5W1H 분석

| 항목 | 내용 |
|:---:|:---|
| **Who** | 프로젝트에 지원하는 사용자, 지원을 승인하는 팀장 |
| **What** | 프로젝트 모집 인원을 관리하고 멤버를 추가하는 기능 |
| **When** | 인기 프로젝트에 여러 사용자가 동시에 지원하거나, 팀장이 여러 지원자를 빠르게 승인할 때 |
| **Where** | 프로젝트 지원 페이지, 팀장의 지원자 관리 페이지 |
| **Why** | 여러 사람이 동시에 지원할 경우, 모집 인원보다 더 많은 사람이 승인되거나 일부 지원이 실패할 수 있기 때문 |
| **How** | 동시 요청 시에도 순차적으로 처리되도록 잠금(Lock) 방식을 강화 |

### 인수 조건

> **"50명이 동시에 같은 프로젝트에 지원해도, 모집 정원(예: 5명)을 초과하여 승인되는 일이 절대 발생하지 않아야 한다."**

---

## Priority 3: 프로젝트 지원 승인/거절

### 5W1H 분석

| 항목 | 내용 |
|:---:|:---|
| **Who** | 프로젝트에 지원하는 사용자, 지원을 검토하는 팀장 |
| **What** | 지원서 제출, 승인/거절 결정, 알림 발송, 멤버 등록의 전체 프로세스 |
| **When** | 사용자가 지원서를 제출한 후, 팀장이 승인 또는 거절 버튼을 클릭할 때 |
| **Where** | 프로젝트 상세 페이지(지원), 팀장의 지원자 관리 페이지(승인/거절) |
| **Why** | 지원 → 알림 → 승인 → 멤버 등록으로 이어지는 과정이 길어서, 중간에 오류 발생 시 데이터 불일치(알림은 갔는데 멤버 등록 안 됨 등)가 발생할 수 있기 때문 |
| **How** | 모든 단계가 하나의 작업 단위로 처리되어, 중간 실패 시 전체가 취소(롤백)되도록 보장 |

### 인수 조건

> **"팀장이 지원을 승인하면, 지원자는 즉시 팀 멤버 목록에 표시되고 '승인되었습니다' 알림을 받아야 한다."**

---

## Priority 4: 인증 & 환경 설정

### 5W1H 분석

| 항목 | 내용 |
|:---:|:---|
| **Who** | 로그인하는 모든 사용자, 시스템을 배포하는 운영자 |
| **What** | 회원가입, 로그인, 토큰 갱신, 로그아웃 등 인증 관련 기능 |
| **When** | 사용자가 로그인하거나, 오랜 시간 후 다시 접속할 때 (토큰 갱신), 운영자가 새 환경에 배포할 때 |
| **Where** | 로그인 페이지, 모든 인증이 필요한 페이지 |
| **Why** | 현재 도메인 주소가 코드에 직접 적혀있어서, 새로운 환경(테스트 서버, 운영 서버)에 배포할 때마다 코드를 수정해야 하기 때문 |
| **How** | 도메인 주소를 코드가 아닌 설정 파일에서 읽어오도록 변경 |

### 인수 조건

> **"코드 수정 없이 설정 파일만 변경하여 개발/테스트/운영 환경에 배포할 수 있어야 한다."**

---

## Priority 5: 파일 업로드

### 5W1H 분석

| 항목 | 내용 |
|:---:|:---|
| **Who** | 프로필 이미지나 프로젝트 이미지를 업로드하는 사용자 |
| **What** | 이미지 파일을 서버에 업로드하고 URL을 받아오는 기능 |
| **When** | 사용자가 프로필 설정이나 프로젝트 생성 시 이미지를 첨부할 때 |
| **Where** | 프로필 편집 페이지, 프로젝트 생성/수정 페이지 |
| **Why** | 허용되지 않은 파일 형식이나 너무 큰 파일이 업로드되면 저장 공간 낭비 및 보안 문제가 발생할 수 있기 때문 |
| **How** | 업로드 전 파일 확장자와 용량을 검사하여 조건에 맞지 않으면 거부 |

### 인수 조건

> **"사용자가 허용되지 않은 파일(exe, zip 등)을 업로드하면 '지원하지 않는 파일 형식입니다' 메시지가 표시되어야 한다."**

---

## 인수 조건 요약

| 순위 | 기능 | 인수 조건 |
|:---:|:---|:---|
| 1 | 프로젝트 검색 | 프로젝트 100개 상태에서 검색 결과가 정상적으로 표시되어야 한다 |
| 2 | 멤버 추가 | 50명 동시 지원 시에도 모집 정원을 초과 승인하는 일이 없어야 한다 |
| 3 | 지원 승인/거절 | 승인 즉시 멤버 목록에 표시되고 알림이 발송되어야 한다 |
| 4 | 인증 | 코드 수정 없이 설정 파일만으로 환경별 배포가 가능해야 한다 |
| 5 | 파일 업로드 | 허용되지 않은 파일 업로드 시 명확한 에러 메시지가 표시되어야 한다 |

---

## 인수 테스트 대상 선정

### 선정 기준

인수 테스트는 **비개발자(기획자, QA)도 검증 가능한** 조건을 대상으로 합니다. 아래 3가지 기준 중 **모두 충족**하는 경우 인수 테스트로 작성합니다.

| 기준 | 설명 | 예시 |
|:---|:---|:---|
| **비개발자 검증 가능** | 기술 용어 없이 결과를 확인할 수 있는가? | ✓ "2초 이내 응답" / ✗ "쿼리 3개로 감소" |
| **사용자 시나리오 표현 가능** | "사용자가 ~하면 ~한다"로 표현 가능한가? | ✓ "50명이 동시에 지원하면..." / ✗ "@Retry가 3번 재시도하면..." |
| **API 경계에서 관찰 가능** | HTTP 응답, 화면에서 확인 가능한가? | ✓ 응답 코드, 에러 메시지 / ✗ 내부 예외 처리, 설정 파일 |

### 대상 판별 결과

| 인수 조건 | 비개발자 검증 | 사용자 시나리오 | API 관찰 | 판정 |
|:---|:---:|:---:|:---:|:---:|
| 프로젝트 100개에서 결과 정상 표시 | ✓ | ✓ | ✓ | **인수 테스트** |
| 50명 동시 지원해도 정원 초과 안 됨 | ✓ | ✓ | ✓ | **인수 테스트** |
| 승인 즉시 멤버 목록 표시 + 알림 발송 | ✓ | ✓ | ✓ | **인수 테스트** |
| 코드 수정 없이 환경별 배포 가능 | ✗ | ✗ | ✗ | 통합 테스트 |
| 허용되지 않은 파일 업로드 시 에러 메시지 | ✓ | ✓ | ✓ | **인수 테스트** |

### 인수 테스트 대상 (4개)

| Priority | 기능 | 인수 조건 | 검증 방법 |
|:---:|:---|:---|:---|
| 1 | 프로젝트 검색 | 프로젝트 100개 상태에서 결과 정상 표시 | API 응답 결과 확인 |
| 2 | 멤버 추가 | 50명 동시 지원해도 정원 초과 안 됨 | 동시 요청 후 DB 멤버 수 확인 |
| 3 | 지원 승인 | 승인 즉시 멤버 목록 표시 + 알림 발송 | 멤버 목록 API + 알림 API 응답 확인 |
| 5 | 파일 업로드 | 허용되지 않은 파일 업로드 시 에러 메시지 | API 에러 응답 메시지 확인 |

### 단위/통합 테스트 대상 (1개)

| Priority | 기능 | 인수 조건 | 테스트 레벨 | 제외 사유 |
|:---:|:---|:---|:---|:---|
| 4 | 인증/환경설정 | 코드 수정 없이 설정 파일로 배포 | **통합 테스트** | 배포/설정은 개발자 영역, 사용자가 관찰 불가 |

> **참고**: Priority 4의 "로그인/토큰 갱신" 기능 자체는 사용자가 관찰 가능하므로 인수 테스트 대상이 될 수 있습니다. 단, "환경별 설정 외부화"는 기술적 구현 검증이므로 통합 테스트로 분류합니다.
